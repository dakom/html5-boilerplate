!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,r){"use strict";(function(t){function n(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function i(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}var o=e;o.asPromise=r(15),o.base64=r(16),o.EventEmitter=r(17),o.float=r(18),o.inquire=r(19),o.utf8=r(20),o.pool=r(21),o.LongBits=r(22),o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=Boolean(t.process&&t.process.versions&&t.process.versions.node),o.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},o.isString=function(t){return"string"==typeof t||t instanceof String},o.isObject=function(t){return t&&"object"==typeof t},o.isset=o.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var t=o.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(t){return"number"==typeof t?o.Buffer?o._Buffer_allocUnsafe(t):new o.Array(t):o.Buffer?o._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=t.dcodeIO&&t.dcodeIO.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(t){return t?o.LongBits.from(t).toHash():o.LongBits.zeroHash},o.longFromHash=function(t,e){var r=o.LongBits.fromHash(t);return o.Long?o.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},o.merge=n,o.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},o.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var t=o.Buffer;if(!t)return void(o._Buffer_from=o._Buffer_allocUnsafe=null);o._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},o._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}}}).call(e,r(14))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.undefinedAllowed=!1,this.nullAllowed=!1,this.stringEmptyAllowed=!1,this.numberZeroAllowed=!0,this.numberPositiveAllowed=!0,this.numberNegativeAllowed=!0,this.booleanFalseAllowed=!0,this.arrayEmptyAllowed=!1,this.objectEmptyAllowed=!1}return t}();e.ValidationOptions=n;var i=function(){function t(){}return t.Validate=function(t,e){if(void 0===e&&(e=new n),void 0===t)return e.undefinedAllowed;if(null===t)return e.nullAllowed;if("number"==typeof t){if(0===t)return e.numberZeroAllowed;if(t<0)return e.numberNegativeAllowed;if(t>0)return e.numberPositiveAllowed}if("string"==typeof t)return""!==t||e.stringEmptyAllowed;if("boolean"==typeof t)return!1!==t||e.booleanFalseAllowed;if(t instanceof Array){if(0==t.length&&!e.objectEmptyAllowed)return!1;for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!this.Validate(o,e))return!1}return!0}if(t instanceof Object){var s=Object.keys(t);if(0==s.length&&!e.arrayEmptyAllowed)return!1;for(var a=0,u=s;a<u.length;a++){var c=u[a];if(!this.Validate(t[c],e))return!1}return!0}return!1},t}();e.ObjectUtils=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"audioExt",{get:function(){if(void 0===this._audioExt){var t=window.Modernizr;"probably"==t.audio.mp3?this._audioExt=".mp3":"probably"==t.audio.ogg?this._audioExt=".ogg":"probably"==t.audio.m4a||"probably"==t.audio.aac?this._audioExt=".m4a":(this._audioExt=".mp3",console.log("unable to detect any supported audio format, defaulting to "+this._audioExt)),console.log("Audio ext is not set, setting to "+this._audioExt)}return this._audioExt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"videoExt",{get:function(){if(void 0===this._videoExt){var t=window.Modernizr;"probably"==t.video.h264?this._videoExt=".mp4":"probably"==t.video.webm?this._videoExt=".webm":"probably"==t.video.ogg?this._videoExt=".ogv":(this._videoExt=".mp4",console.log("unable to detect any supported video format, defaulting to "+this._videoExt)),console.log("Vidio ext is not set, setting to "+this._videoExt)}return this._videoExt},enumerable:!0,configurable:!0}),t.GetCdnPath=function(t){return"https://cdn.rawgit.com/dakom/html5-boilerplate/1.0/static/cdn/"+t},t.GetDistPath=function(t){return""+t},t.GetImagePath=function(e){return t.GetCdnPath("graphics/"+e)},t.GetConfigPath=function(e){return t.GetDistPath("app-config/"+e)},t.GetAudioPath=function(e){return t.GetCdnPath("audio/"+e)+this.audioExt},t.GetVideoPath=function(e){return t.GetDistPath("video/"+e+this.videoExt)},t}();e.Path=n},function(t,e,r){"use strict";t.exports=r(13)},function(t,e,r){"use strict";function n(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function i(){}function o(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function s(){this.len=0,this.head=new n(i,0,0),this.tail=this.head,this.states=null}function a(t,e,r){e[r]=255&t}function u(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t}function c(t,e){this.len=t,this.next=void 0,this.val=e}function l(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function h(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}t.exports=s;var f,p=r(0),d=p.LongBits,y=p.base64,g=p.utf8;s.create=p.Buffer?function(){return(s.create=function(){return new f})()}:function(){return new s},s.alloc=function(t){return new p.Array(t)},p.Array!==Array&&(s.alloc=p.pool(s.alloc,p.Array.prototype.subarray)),s.prototype._push=function(t,e,r){return this.tail=this.tail.next=new n(t,e,r),this.len+=e,this},c.prototype=Object.create(n.prototype),c.prototype.fn=u,s.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new c((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},s.prototype.int32=function(t){return t<0?this._push(l,10,d.fromNumber(t)):this.uint32(t)},s.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},s.prototype.uint64=function(t){var e=d.from(t);return this._push(l,e.length(),e)},s.prototype.int64=s.prototype.uint64,s.prototype.sint64=function(t){var e=d.from(t).zzEncode();return this._push(l,e.length(),e)},s.prototype.bool=function(t){return this._push(a,1,t?1:0)},s.prototype.fixed32=function(t){return this._push(h,4,t>>>0)},s.prototype.sfixed32=s.prototype.fixed32,s.prototype.fixed64=function(t){var e=d.from(t);return this._push(h,4,e.lo)._push(h,4,e.hi)},s.prototype.sfixed64=s.prototype.fixed64,s.prototype.float=function(t){return this._push(p.float.writeFloatLE,4,t)},s.prototype.double=function(t){return this._push(p.float.writeDoubleLE,8,t)};var v=p.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};s.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(a,1,0);if(p.isString(t)){var r=s.alloc(e=y.length(t));y.decode(t,r,0),t=r}return this.uint32(e)._push(v,e,t)},s.prototype.string=function(t){var e=g.length(t);return e?this.uint32(e)._push(g.write,e,t):this._push(a,1,0)},s.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new n(i,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new n(i,0,0),this.len=0),this},s.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},s.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},s._configure=function(t){f=t}},function(t,e,r){"use strict";function n(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function i(t){this.buf=t,this.pos=0,this.len=t.length}function o(){var t=new l(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw n(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw n(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function s(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function a(){if(this.pos+8>this.len)throw n(this,8);return new l(s(this.buf,this.pos+=4),s(this.buf,this.pos+=4))}t.exports=i;var u,c=r(0),l=c.LongBits,h=c.utf8,f="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new i(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new i(t);throw Error("illegal buffer")};i.create=c.Buffer?function(t){return(i.create=function(t){return c.Buffer.isBuffer(t)?new u(t):f(t)})(t)}:f,i.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,i.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,n(this,10);return t}}(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw n(this,4);return s(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw n(this,4);return 0|s(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw n(this,4);var t=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},i.prototype.double=function(){if(this.pos+8>this.len)throw n(this,4);var t=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},i.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw n(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},i.prototype.string=function(){var t=this.bytes();return h.read(t,0,t.length)},i.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw n(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw n(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},i._configure=function(t){u=t;var e=c.Long?"toLong":"toNumber";c.merge(i.prototype,{int64:function(){return o.call(this)[e](!1)},uint64:function(){return o.call(this)[e](!0)},sint64:function(){return o.call(this).zzDecode()[e](!1)},fixed64:function(){return a.call(this)[e](!0)},sfixed64:function(){return a.call(this)[e](!1)}})}},,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9);new(function(){function t(){(new n.GameController).init.then(function(){console.log("game ready!")})}return t}())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(1),o=r(11),s=r(28),a=r(30),u=r(37),c=r(38),l=function(){function t(){var t=this;console.log("Game Controller Constructor"),this.canvas=new n.Canvas,this.statusDisplay=new u.StatusDisplay(this),this.canvas.stage.addChild(this.statusDisplay),this.statusDisplay.label="Loading...",this.init=new Promise(function(e,r){t.assets=new o.AssetManager,t.assets.promise.then(function(){console.log("assets loaded!"),t.setConfig(),t.layers=new a.LayerManager(t),t.canvas.stage.addChild(t.layers),t.menu=new s.MenuManager(t),t.canvas.stage.addChild(t.menu),t.layers.onMenuUpdate(),t.canvas.stage.setChildIndex(t.statusDisplay,t.canvas.stage.children.length-1),PIXI.ticker.shared.add(function(e){var r=PIXI.ticker.shared.FPS.toFixed(0).toString()+"fps";t.menu.worker.enabled&&(r="Core: "+r+"\nWorker: "+t.layers.worker.getStatusInfo()),t.statusDisplay.label=r}),e()})})}return t.prototype.setConfig=function(){var t=this.assets.loader.resources.config.data.game,e=c.gameConfig.Options.verify(t);if(null!==e)throw e;this.config=c.gameConfig.Options.create(t);var r=new i.ValidationOptions;if(r.numberNegativeAllowed=!1,r.numberZeroAllowed=!1,!i.ObjectUtils.Validate(c.gameConfig.Options.toObject(this.config),r))throw new Error("bad game configuration")},t}();e.GameController=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.app=new PIXI.Application(1024,720,{backgroundColor:1087931}),document.body.appendChild(this.app.view),this.doScaleWindow(),window.addEventListener("resize",this.doScaleWindow.bind(this))}return t.prototype.doScaleWindow=function(){this.windowScaleRatio=window.scaleToWindow(this.app.renderer.view,16777215)},Object.defineProperty(t.prototype,"stage",{get:function(){return this.app.stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.app.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticker",{get:function(){return this.app.ticker},enumerable:!0,configurable:!0}),t}();e.Canvas=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(1),o=r(12),s=function(){function t(){var t=this;this.promise=new Promise(function(e,r){t.loader=new PIXI.loaders.Loader,t.loader.add("gameassets",n.Path.GetImagePath("game/gameassets.json")),t.loader.add("fx",n.Path.GetAudioPath("fx/touch")),t.loader.add("bg-music",n.Path.GetAudioPath("music/bg")),t.loader.add("config",n.Path.GetConfigPath("config.json")),t.loader.onError.add(function(t){r(t)}),t.loader.load(function(r,n){var s=n.config.data.app,a=o.appConfig.Info.verify(s);if(null!==a)throw a;if(t.info=o.appConfig.Info.fromObject(s),!i.ObjectUtils.Validate(o.appConfig.Info.toObject(t.info)))throw new Error("bad app configuration");console.log("Version: "+t.info.version),e()})})}return t}();e.AssetManager=s},function(t,e,r){"use strict";var n=r(3),i=n.Reader,o=n.Writer,s=n.util,a=n.roots.default||(n.roots.default={});a.appConfig=function(){var t={};return t.Info=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.version="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(10).string(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.appConfig.Info;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.version=t.string();break;default:t.skipType(7&o)}}return n},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.version&&t.hasOwnProperty("version")&&!s.isString(t.version)?"version: string expected":null},t.fromObject=function(t){if(t instanceof a.appConfig.Info)return t;var e=new a.appConfig.Info;return null!=t.version&&(e.version=String(t.version)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.version=""),null!=t.version&&t.hasOwnProperty("version")&&(r.version=t.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},function(t,e,r){"use strict";function n(){i.Reader._configure(i.BufferReader),i.util._configure()}var i=e;i.build="minimal",i.Writer=r(4),i.BufferWriter=r(23),i.Reader=r(5),i.BufferReader=r(24),i.util=r(0),i.rpc=r(25),i.roots=r(27),i.configure=n,i.Writer._configure(i.BufferWriter),n()},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){o&&(o=!1,s(t))}})}t.exports=n},function(t,e,r){"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(t,e,r){for(var n,o=null,s=[],a=0,u=0;e<r;){var c=t[e++];switch(u){case 0:s[a++]=i[c>>2],n=(3&c)<<4,u=1;break;case 1:s[a++]=i[n|c>>4],n=(15&c)<<2,u=2;break;case 2:s[a++]=i[n|c>>6],s[a++]=i[63&c],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=i[n],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};n.decode=function(t,e,r){for(var n,i=r,s=0,a=0;a<t.length;){var u=t.charCodeAt(a++);if(61===u&&s>1)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(s){case 0:n=u,s=1;break;case 1:e[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:e[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:e[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return r-i},n.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},function(t,e,r){"use strict";function n(){this._listeners={}}t.exports=n,n.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},n.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},n.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},function(t,e,r){"use strict";function n(t){return"undefined"!=typeof Float32Array?function(){function e(t,e,r){o[0]=t,e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3]}function r(t,e,r){o[0]=t,e[r]=s[3],e[r+1]=s[2],e[r+2]=s[1],e[r+3]=s[0]}function n(t,e){return s[0]=t[e],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],o[0]}function i(t,e){return s[3]=t[e],s[2]=t[e+1],s[1]=t[e+2],s[0]=t[e+3],o[0]}var o=new Float32Array([-0]),s=new Uint8Array(o.buffer),a=128===s[3];t.writeFloatLE=a?e:r,t.writeFloatBE=a?r:e,t.readFloatLE=a?n:i,t.readFloatBE=a?i:n}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>3.4028234663852886e38)t((i<<31|2139095040)>>>0,r,n);else if(e<1.1754943508222875e-38)t((i<<31|Math.round(e/1.401298464324817e-45))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,r,n)}}function r(t,e,r){var n=t(e,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1.401298464324817e-45*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=r.bind(null,s),t.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){function e(t,e,r){o[0]=t,e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7]}function r(t,e,r){o[0]=t,e[r]=s[7],e[r+1]=s[6],e[r+2]=s[5],e[r+3]=s[4],e[r+4]=s[3],e[r+5]=s[2],e[r+6]=s[1],e[r+7]=s[0]}function n(t,e){return s[0]=t[e],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],s[4]=t[e+4],s[5]=t[e+5],s[6]=t[e+6],s[7]=t[e+7],o[0]}function i(t,e){return s[7]=t[e],s[6]=t[e+1],s[5]=t[e+2],s[4]=t[e+3],s[3]=t[e+4],s[2]=t[e+5],s[1]=t[e+6],s[0]=t[e+7],o[0]}var o=new Float64Array([-0]),s=new Uint8Array(o.buffer),a=128===s[7];t.writeDoubleLE=a?e:r,t.writeDoubleBE=a?r:e,t.readDoubleLE=a?n:i,t.readDoubleBE=a?i:n}():function(){function e(t,e,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))t(0,i,o+e),t(2146959360,i,o+r);else if(n>1.7976931348623157e308)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<2.2250738585072014e-308)a=n/5e-324,t(a>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),a=n*Math.pow(2,-u),t(4503599627370496*a>>>0,i,o+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function r(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=r.bind(null,s,0,4),t.readDoubleBE=r.bind(null,a,4,0)}(),t}function i(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function o(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},function(t,e,r){"use strict";var n=e;n.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},n.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,o=[],s=0;e<r;)n=t[e++],n<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)n=t.charCodeAt(s),n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=t.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-o}},function(t,e,r){"use strict";function n(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}t.exports=n},function(t,e,r){"use strict";function n(t,e){this.lo=t>>>0,this.hi=e>>>0}t.exports=n;var i=r(0),o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,i=(t-r)/4294967296>>>0;return e&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(i.isString(t)){if(!i.Long)return n.fromNumber(parseInt(t,10));t=i.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):o},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===s?o:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},function(t,e,r){"use strict";function n(){o.call(this)}function i(t,e,r){t.length<40?s.utf8.write(t,e,r):e.utf8Write(t,r)}t.exports=n;var o=r(4);(n.prototype=Object.create(o.prototype)).constructor=n;var s=r(0),a=s.Buffer;n.alloc=function(t){return(n.alloc=s._Buffer_allocUnsafe)(t)};var u=a&&a.prototype instanceof Uint8Array&&"set"===a.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]};n.prototype.bytes=function(t){s.isString(t)&&(t=s._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(u,e,t),this},n.prototype.string=function(t){var e=a.byteLength(t);return this.uint32(e),e&&this._push(i,e,t),this}},function(t,e,r){"use strict";function n(t){i.call(this,t)}t.exports=n;var i=r(5);(n.prototype=Object.create(i.prototype)).constructor=n;var o=r(0);o.Buffer&&(n.prototype._slice=o.Buffer.prototype.slice),n.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,e,r){"use strict";e.Service=r(26)},function(t,e,r){"use strict";function n(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}t.exports=n;var i=r(0);(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,r,n,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(t,a,e,r,n,o);if(!a.rpcImpl)return void setTimeout(function(){s(Error("already ended"))},0);try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(t,r){if(t)return a.emit("error",t,e),s(t);if(null===r)return void a.end(!0);if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",r,e),s(null,r)})}catch(t){return a.emit("error",t,e),void setTimeout(function(){s(t)},0)}},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,r){"use strict";t.exports={}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(29),o=function(t){function e(e){var r=t.call(this)||this;r.gameController=e;var n=e.assets,o=n.loader.resources.gameassets.textures.bg,s=n.loader.resources.gameassets.textures.circle,a=10;return r.character=new i.ToggleButton(o,s,"Character"),r.character.x=10,r.character.y=a,r.character.on("pointerdown",r.buttonChanged.bind(r)),a+=o.height+10,r.worker=new i.ToggleButton(o,s,"Worker"),r.worker.x=10,r.worker.y=a,r.worker.on("pointerdown",r.buttonChanged.bind(r)),a+=o.height+10,r.video=new i.ToggleButton(o,s,"Video"),r.video.x=10,r.video.y=a,r.video.on("pointerdown",r.buttonChanged.bind(r)),r.addChild(r.character,r.worker,r.video),r}return n(e,t),e.prototype.buttonChanged=function(t){t.currentTarget instanceof i.ToggleButton&&(t.currentTarget.enabled=!t.currentTarget.enabled),this.gameController.layers.onMenuUpdate()},e}(PIXI.Container);e.MenuManager=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r,n){var i=t.call(this)||this;return i.bgTexture=e,i.knobTexture=r,i.label=n,i.style=new PIXI.TextStyle({fontFamily:"Arial",fontSize:36,fontWeight:"bold",fill:"white"}),i.interactive=i.buttonMode=!0,i.enabled=!1,i}return n(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){if(t!==this._enabled){this._enabled=t,void 0!==this.container&&this.removeChild(this.container);var e=new PIXI.Container,r=new PIXI.Sprite(this.bgTexture),n=new PIXI.Sprite(this.knobTexture);e.addChild(r),e.addChild(n),n.y=(r.height-n.height)/2;var i=new PIXI.Text(this.label);i.style=this.style,i.y=(r.height-i.height)/2,e.addChild(i),t?(n.x=r.width-n.width-10,i.x=n.x-i.width-10,r.tint=65280):(n.x=10,i.x=n.x+n.width+10,r.tint=13421772),this.container=e,this.addChild(this.container)}},enumerable:!0,configurable:!0}),e}(PIXI.Container);e.ToggleButton=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(31),o=r(34),s=r(36),a=function(t){function e(e){var r=t.call(this)||this;return r.gameController=e,r}return n(e,t),e.prototype.onMenuUpdate=function(){this.gameController.menu.video.enabled?void 0===this.video?(this.video=new s.VideoManager(this.gameController),this.addChild(this.video),this.video.play()):this.setChildIndex(this.video,this.children.length-1):void 0!==this.video&&(this.video.stop(),this.removeChild(this.video),delete this.video),this.gameController.menu.worker.enabled?void 0===this.worker?(this.worker=new o.WorkerManager(this.gameController),this.addChild(this.worker)):this.setChildIndex(this.worker,this.children.length-1):void 0!==this.worker&&(this.removeChild(this.worker),delete this.worker),this.gameController.menu.character.enabled?void 0===this.character?(this.character=new i.CharacterManager(this.gameController),this.addChild(this.character)):this.setChildIndex(this.character,this.children.length-1):void 0!==this.character&&(this.removeChild(this.character),delete this.character),console.log("got menu update!")},e}(PIXI.Container);e.LayerManager=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(32),o=function(t){function e(e){var r=t.call(this)||this;return r.gameController=e,r.tux=new i.Character(e.assets.loader.resources.gameassets.textures.character,e.assets.loader.resources.fx.sound,e.canvas.renderer.width,e.canvas.renderer.height),r.addChild(r.tux),r.ticker=new PIXI.ticker.Ticker,r.ticker.add(r.tux.update.bind(r.tux)),r.ticker.start(),r.on("removed",function(){r.ticker.stop()}),r}return n(e,t),e}(PIXI.Container);e.CharacterManager=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(33),o=function(t){function e(e,r,n,o){var s=t.call(this,e)||this;return s.boingSound=r,s.xMax=n,s.yMax=o,s.speed=10,s.rotationLimit=.1,s.filterSpeed=.1,s.anchor.set(.5),s.x=n/2,s.y=o/2,s.xMax-=s.width/2,s.yMax-=s.height/2,s.xMin=s.width/2,s.yMin=s.height/2,s.dx=Math.random()+.1,Math.random()>.5&&(s.dx*=-1),s.dy=Math.random()+.1,Math.random()>.5&&(s.dy*=-1),s.dr=Math.random(),Math.random()>.5&&(s.dr*=-1),s.dr*=s.rotationLimit,s.hitFilter=new i.HitFilter,s}return n(e,t),e.prototype.update=function(t){var e=!1;this.x+=this.dx*(t*this.speed),this.y+=this.dy*(t*this.speed),this.rotation+=this.dr*t,this.y<this.yMin&&(e=!0,this.y=this.yMin,this.dy=Math.random()+.1),this.y>this.yMax&&(e=!0,this.y=this.yMax,this.dy=-1*(Math.random()+.1)),this.x<this.xMin&&(e=!0,this.x=this.xMin,this.dx=Math.random()+.1),this.x>this.xMax&&(e=!0,this.x=this.xMax,this.dx=-1*(Math.random()+.1)),e&&(this.dr=Math.random(),Math.random()>.5&&(this.dr*=-1),this.dr*=this.rotationLimit,this.doBumpEffect())},e.prototype.doBumpEffect=function(){var t=this;this.boingSound.play(),void 0===this.filterTicker&&(this.filterColor={r:Math.random(),g:Math.random(),b:Math.random(),a:0},this.hitFilter.rgbColor=this.filterColor,this.filters=[this.hitFilter],this.filterDirection=1,this.filterTicker=new PIXI.ticker.Ticker,this.filterTicker.add(function(e){t.updateFilter(e)}),this.filterTicker.start())},e.prototype.updateFilter=function(t){var e=t*this.filterSpeed;this.filterColor.a+=e*this.filterDirection,this.filterColor.a>1&&(this.filterColor.a=1,this.filterDirection=-1),this.filterColor.a<0?(this.filters=[],this.filterTicker.stop(),delete this.filterTicker):this.hitFilter.rgbColor=this.filterColor},e}(PIXI.Sprite);e.Character=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e={rgbColor:{value:[1,1,1,1]}};return t.call(this,"\n            attribute vec2 aVertexPosition;\n            attribute vec2 aTextureCoord;\n\n            uniform mat3 projectionMatrix;\n\n            varying vec2 vTextureCoord;\n\n            void main(void) {\n                vTextureCoord = aTextureCoord;\n                gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 1.0, 1.0);\n            }\n        ","\n            precision mediump float;\n\n            varying vec2 vTextureCoord;\n            uniform sampler2D uSampler;\n            uniform vec4 rgbColor;\n           \n            void main(void) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                vec4 tmpColor = mix(gl_FragColor, rgbColor, rgbColor.a) * gl_FragColor.a;\n                tmpColor.a = gl_FragColor.a;\n                gl_FragColor = tmpColor;\n            }\n        ",e)||this}return n(e,t),Object.defineProperty(e.prototype,"rgbColor",{get:function(){var t=this.uniforms.rgbColor;return{r:t[0],g:t[1],b:t[2],a:t[3]}},set:function(t){this.uniforms.rgbColor=[t.r,t.g,t.b,t.a]},enumerable:!0,configurable:!0}),e}(PIXI.Filter);e.HitFilter=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(35),o=function(t){function e(e){var r=t.call(this)||this;return r.gameController=e,r.iterations=0,r.iterations=r.gameController.config.minimumIterations,r.bgMusic=e.assets.loader.resources["bg-music"].sound,r.bgMusic.loop=!0,!0===e.config.playBackgroundMusic&&r.bgMusic.play(),r.dSprite=new i.DrawableSprite(e.canvas.renderer.width,e.canvas.renderer.height),r.addChild(r.dSprite),r.worker=new Worker("fractalWorker.js"),r.worker.addEventListener("message",function(t){"ready"==t.data.cmd?r.requestDataUpdate():"data"==t.data.cmd&&r.onDataUpdate(t.data)}),r.worker.postMessage({cmd:"init",width:r.dSprite.imgWidth,height:r.dSprite.imgHeight}),r.on("removed",function(){r.bgMusic.stop(),r.worker.terminate()}),r}return n(e,t),e.prototype.requestDataUpdate=function(){var t=Date.now();if(void 0!==this.lastUpdate){var e=this.gameController.config.targetWorkerFps,r=this.gameController.config.workerIterationJump,n=(t-this.lastUpdate)/1e3;this.fps=Math.round(1/n),this.fps>e?this.iterations+=r:this.fps<e&&this.iterations>this.gameController.config.minimumIterations&&(this.iterations-=r)}this.lastUpdate=t,this.worker.postMessage({cmd:"getData",iterations:this.iterations,dataBuf:this.dSprite.dataBuf},[this.dSprite.dataBuf])},e.prototype.onDataUpdate=function(t){this.dSprite.dataBuf=t.buf,this.requestDataUpdate()},e.prototype.getStatusInfo=function(){return void 0!==this.fps?this.fps+" fps "+this.iterations.toString()+" iter":""},e}(PIXI.Container);e.WorkerManager=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r){var n=t.call(this)||this;return n.imgWidth=e,n.imgHeight=r,n.canvas=document.createElement("canvas"),n.canvas.width=e,n.canvas.height=r,n.ctx=n.canvas.getContext("2d"),n._sprite=new PIXI.Sprite(PIXI.Texture.fromCanvas(n.canvas)),n.addChild(n._sprite),n.imgData=n.ctx.createImageData(e,r),n.dataBuf=new ArrayBuffer(n.imgData.data.byteLength),n}return n(e,t),Object.defineProperty(e.prototype,"dataBuf",{get:function(){return this._dataBuf},set:function(t){this._dataBuf=t,this.imgData.data.set(new Uint8ClampedArray(this.dataBuf)),this.ctx.putImageData(this.imgData,0,0),this._sprite.texture.update()},enumerable:!0,configurable:!0}),e}(PIXI.Container);e.DrawableSprite=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=function(t){function e(e){var r=t.call(this)||this;return r.gameController=e,r}return n(e,t),e.prototype.play=function(){this.videoElement=document.createElement("video"),this.videoElement.muted=!0,this.videoElement.crossOrigin="anonymous",this.videoElement.loop=!0,this.videoElement.autoplay=!0,this.videoElement.src=i.Path.GetVideoPath("bees"),this.videoElement.addEventListener("ended",function(t){console.log("Video ended!")}),this.videoElement.addEventListener("timeupdate",function(t){}),console.log(this.videoElement);var t=PIXI.Texture.fromVideo(this.videoElement),e=new PIXI.Sprite(t);e.width=1024,e.height=768,this.addChild(e)},e.prototype.stop=function(){this.videoElement.pause(),delete this.videoElement},e}(PIXI.Container);e.VideoManager=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var r=t.call(this)||this;return r.gameController=e,r}return n(e,t),Object.defineProperty(e.prototype,"label",{set:function(t){if(void 0===this.textSprite){var e=new PIXI.TextStyle({fontFamily:"Arial",fontSize:36,fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6,wordWrap:!1,align:"right"});this.textSprite=new PIXI.Text,this.textSprite.x=30,this.textSprite.y=60,this.textSprite.style=e,this.addChild(this.textSprite)}this.textSprite.text=t,this.textSprite.x=this.gameController.canvas.renderer.width-this.textSprite.width-10,this.textSprite.y=10},enumerable:!0,configurable:!0}),e}(PIXI.Container);e.StatusDisplay=i},function(t,e,r){"use strict";var n=r(3),i=n.Reader,o=n.Writer,s=n.util,a=n.roots.default||(n.roots.default={});a.gameConfig=function(){var t={};return t.Options=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.playBackgroundMusic=!1,t.prototype.targetWorkerFps=0,t.prototype.workerIterationJump=0,t.prototype.minimumIterations=0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=o.create()),null!=t.playBackgroundMusic&&t.hasOwnProperty("playBackgroundMusic")&&e.uint32(8).bool(t.playBackgroundMusic),null!=t.targetWorkerFps&&t.hasOwnProperty("targetWorkerFps")&&e.uint32(16).int32(t.targetWorkerFps),null!=t.workerIterationJump&&t.hasOwnProperty("workerIterationJump")&&e.uint32(24).int32(t.workerIterationJump),null!=t.minimumIterations&&t.hasOwnProperty("minimumIterations")&&e.uint32(32).int32(t.minimumIterations),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var r=void 0===e?t.len:t.pos+e,n=new a.gameConfig.Options;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:n.playBackgroundMusic=t.bool();break;case 2:n.targetWorkerFps=t.int32();break;case 3:n.workerIterationJump=t.int32();break;case 4:n.minimumIterations=t.int32();break;default:t.skipType(7&o)}}return n},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.playBackgroundMusic&&t.hasOwnProperty("playBackgroundMusic")&&"boolean"!=typeof t.playBackgroundMusic?"playBackgroundMusic: boolean expected":null!=t.targetWorkerFps&&t.hasOwnProperty("targetWorkerFps")&&!s.isInteger(t.targetWorkerFps)?"targetWorkerFps: integer expected":null!=t.workerIterationJump&&t.hasOwnProperty("workerIterationJump")&&!s.isInteger(t.workerIterationJump)?"workerIterationJump: integer expected":null!=t.minimumIterations&&t.hasOwnProperty("minimumIterations")&&!s.isInteger(t.minimumIterations)?"minimumIterations: integer expected":null},t.fromObject=function(t){if(t instanceof a.gameConfig.Options)return t;var e=new a.gameConfig.Options;return null!=t.playBackgroundMusic&&(e.playBackgroundMusic=Boolean(t.playBackgroundMusic)),null!=t.targetWorkerFps&&(e.targetWorkerFps=0|t.targetWorkerFps),null!=t.workerIterationJump&&(e.workerIterationJump=0|t.workerIterationJump),null!=t.minimumIterations&&(e.minimumIterations=0|t.minimumIterations),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.playBackgroundMusic=!1,r.targetWorkerFps=0,r.workerIterationJump=0,r.minimumIterations=0),null!=t.playBackgroundMusic&&t.hasOwnProperty("playBackgroundMusic")&&(r.playBackgroundMusic=t.playBackgroundMusic),null!=t.targetWorkerFps&&t.hasOwnProperty("targetWorkerFps")&&(r.targetWorkerFps=t.targetWorkerFps),null!=t.workerIterationJump&&t.hasOwnProperty("workerIterationJump")&&(r.workerIterationJump=t.workerIterationJump),null!=t.minimumIterations&&t.hasOwnProperty("minimumIterations")&&(r.minimumIterations=t.minimumIterations),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a}]);
//# sourceMappingURL=bundle.js.map