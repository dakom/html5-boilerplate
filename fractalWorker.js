!function(t){function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var e={};r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=6)}({6:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e(7);new(function(){function t(){var t;addEventListener("message",function(r){if("init"==r.data.cmd&&(t=new i.Mandelbrot(r.data.imgData,r.data.width,r.data.height),self.postMessage({cmd:"ready"})),"getData"==r.data.cmd){var e=r.data.dataBuf;t.crunchData(e,r.data.iterations),self.postMessage({cmd:"data",buf:e},[e])}})}return t}())},7:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,r,e){this._imgData=t,this.width=r,this.height=e,this.currentOriginReal=0,this.currentOriginImaginary=0,this.currentRadius=2,this.zoom={factor:.9},this.palettes=[],this.zoom.center={x:920,y:96},this.currentOriginReal=.3988906701602579,this.currentOriginImaginary=.31251882189683733,this.currentRadius=.005477854899906823}return t.prototype.crunchData=function(t,r){var e=new Uint8ClampedArray(t);e.fill(0),this.updatePalette(r),this.drawFractal(e,r,this.currentOriginReal,this.currentOriginImaginary,this.currentRadius,this.width,this.height),this.palettes.unshift(this.palettes.pop())},t.prototype.updatePalette=function(t){for(var r=this.palettes.length;r<=t;r++){var e=[];e.push(255*Math.random()),e.push(255*Math.random()),e.push(255*Math.random()),e.push(255),this.palettes.push(e)}},t.prototype.drawFractal=function(t,r,e,i,a,n,s){for(var u=2*a/n,o=2*a/s,h=0;h<s;++h)for(var c=0;c<n;++c)for(var d=e-a+c*u,p=i-a+h*o,f=0,l=0,g=0;g<r;++g){var m=f*f,v=l*l;if(m+v>=4){this.putPixel(t,c,h,this.palettes[g]);break}var y=m-v+d,O=f*l*2+p;f=y,l=O}},t.prototype.putPixel=function(t,r,e,i){var a=4*(e*this.width+r);t[a]=i[0],t[a+1]=i[1],t[a+2]=i[2],t[a+3]=i[3]},t.prototype.updateZoom=function(){var t=2*this.currentRadius*this.zoom.center.x/this.width,r=2*this.currentRadius*this.zoom.center.y/this.height;this.currentOriginReal+=t-this.currentRadius,this.currentOriginImaginary+=r-this.currentRadius,this.currentRadius*=this.zoom.factor},t}();r.Mandelbrot=i}});
//# sourceMappingURL=fractalWorker.js.map